from z3 import *
import time

def check_property():
    start_time = time.time()
    z3solver = Solver()

    t = Int('t')
    timestamps = Array('timestamps', IntSort(), RealSort())
    ego_acc = Array('ego_acc', IntSort(), RealSort())
    TTC = Array('TTC', IntSort(), RealSort())

    z3solver.add(timestamps[0] == 0)
    z3solver.add(ego_acc[0] == 0.0)
    z3solver.add(TTC[0] == 4.666666666666667)
    z3solver.add(timestamps[1] == 10000)
    z3solver.add(ego_acc[1] == 0.0)
    z3solver.add(TTC[1] == 4.566666666666666)
    z3solver.add(timestamps[2] == 20000)
    z3solver.add(ego_acc[2] == 0.0)
    z3solver.add(TTC[2] == 4.466666666666666)
    z3solver.add(timestamps[3] == 30000)
    z3solver.add(ego_acc[3] == 0.0)
    z3solver.add(TTC[3] == 4.366666666666666)
    z3solver.add(timestamps[4] == 40000)
    z3solver.add(ego_acc[4] == 0.0)
    z3solver.add(TTC[4] == 4.266666666666666)
    z3solver.add(timestamps[5] == 50000)
    z3solver.add(ego_acc[5] == 0.0)
    z3solver.add(TTC[5] == 4.166666666666667)
    z3solver.add(timestamps[6] == 60000)
    z3solver.add(ego_acc[6] == 0.0)
    z3solver.add(TTC[6] == 4.066666666666667)
    z3solver.add(timestamps[7] == 70000)
    z3solver.add(ego_acc[7] == 0.0)
    z3solver.add(TTC[7] == 3.9666666666666686)
    z3solver.add(timestamps[8] == 80000)
    z3solver.add(ego_acc[8] == 0.0)
    z3solver.add(TTC[8] == 3.8666666666666694)
    z3solver.add(timestamps[9] == 90000)
    z3solver.add(ego_acc[9] == 0.0)
    z3solver.add(TTC[9] == 3.7666666666666706)
    z3solver.add(timestamps[10] == 100000)
    z3solver.add(ego_acc[10] == 0.0)
    z3solver.add(TTC[10] == 3.6666666666666714)
    z3solver.add(timestamps[11] == 110000)
    z3solver.add(ego_acc[11] == 0.0)
    z3solver.add(TTC[11] == 3.566666666666672)
    z3solver.add(timestamps[12] == 120000)
    z3solver.add(ego_acc[12] == 0.0)
    z3solver.add(TTC[12] == 3.4666666666666734)
    z3solver.add(timestamps[13] == 130000)
    z3solver.add(ego_acc[13] == 0.0)
    z3solver.add(TTC[13] == 3.3666666666666742)
    z3solver.add(timestamps[14] == 140000)
    z3solver.add(ego_acc[14] == 0.0)
    z3solver.add(TTC[14] == 3.266666666666675)
    z3solver.add(timestamps[15] == 150000)
    z3solver.add(ego_acc[15] == 0.0)
    z3solver.add(TTC[15] == 3.1666666666666763)
    z3solver.add(timestamps[16] == 160000)
    z3solver.add(ego_acc[16] == 0.0)
    z3solver.add(TTC[16] == 3.066666666666677)
    z3solver.add(timestamps[17] == 170000)
    z3solver.add(ego_acc[17] == 0.0)
    z3solver.add(TTC[17] == 2.966666666666678)
    z3solver.add(timestamps[18] == 180000)
    z3solver.add(ego_acc[18] == 0.0)
    z3solver.add(TTC[18] == 2.866666666666679)
    z3solver.add(timestamps[19] == 190000)
    z3solver.add(ego_acc[19] == 0.0)
    z3solver.add(TTC[19] == 2.76666666666668)
    z3solver.add(timestamps[20] == 200000)
    z3solver.add(ego_acc[20] == -3.5)
    z3solver.add(TTC[20] == 2.0)
    z3solver.add(timestamps[21] == 210000)
    z3solver.add(ego_acc[21] == -3.5)
    z3solver.add(TTC[21] == 2.0)
    z3solver.add(timestamps[22] == 220000)
    z3solver.add(ego_acc[22] == -3.5)
    z3solver.add(TTC[22] == 2.0)
    z3solver.add(timestamps[23] == 230000)
    z3solver.add(ego_acc[23] == -3.5)
    z3solver.add(TTC[23] == 2.0)
    z3solver.add(timestamps[24] == 240000)
    z3solver.add(ego_acc[24] == -3.5)
    z3solver.add(TTC[24] == 2.0)
    z3solver.add(timestamps[25] == 250000)
    z3solver.add(ego_acc[25] == 0.0)
    z3solver.add(TTC[25] == 2.1666666666666856)
    z3solver.add(timestamps[26] == 260000)
    z3solver.add(ego_acc[26] == 0.0)
    z3solver.add(TTC[26] == 2.066666666666682)
    z3solver.add(timestamps[27] == 270000)
    z3solver.add(ego_acc[27] == -0.5)
    z3solver.add(TTC[27] == 1.966666666666678)
    z3solver.add(timestamps[28] == 280000)
    z3solver.add(ego_acc[28] == -0.5)
    z3solver.add(TTC[28] == 1.9344827586206954)
    z3solver.add(timestamps[29] == 290000)
    z3solver.add(ego_acc[29] == -0.5)
    z3solver.add(TTC[29] == 1.903571428571435)
    z3solver.add(timestamps[30] == 300000)
    z3solver.add(ego_acc[30] == -0.5)
    z3solver.add(TTC[30] == 1.8740740740740778)
    z3solver.add(timestamps[31] == 310000)
    z3solver.add(ego_acc[31] == -0.5)
    z3solver.add(TTC[31] == 1.8461538461538436)
    z3solver.add(timestamps[32] == 320000)
    z3solver.add(ego_acc[32] == -0.5)
    z3solver.add(TTC[32] == 1.8199999999999983)
    z3solver.add(timestamps[33] == 330000)
    z3solver.add(ego_acc[33] == -0.5)
    z3solver.add(TTC[33] == 1.7958333333333287)
    z3solver.add(timestamps[34] == 340000)
    z3solver.add(ego_acc[34] == -0.5)
    z3solver.add(TTC[34] == 1.7739130434782493)
    z3solver.add(timestamps[35] == 350000)
    z3solver.add(ego_acc[35] == -1.0)
    z3solver.add(TTC[35] == 1.754545454545444)
    z3solver.add(timestamps[36] == 360000)
    z3solver.add(ego_acc[36] == -1.0)
    z3solver.add(TTC[36] == 1.829999999999983)
    z3solver.add(timestamps[37] == 370000)
    z3solver.add(ego_acc[37] == -1.0)
    z3solver.add(TTC[37] == 1.9333333333333145)
    z3solver.add(timestamps[38] == 380000)
    z3solver.add(ego_acc[38] == -1.0)
    z3solver.add(TTC[38] == 2.074999999999986)
    z3solver.add(timestamps[39] == 390000)
    z3solver.add(ego_acc[39] == -1.0)
    z3solver.add(TTC[39] == 2.2714285714285523)
    z3solver.add(timestamps[40] == 400000)
    z3solver.add(ego_acc[40] == -1.0)
    z3solver.add(TTC[40] == 2.549999999999985)
    z3solver.add(timestamps[41] == 410000)
    z3solver.add(ego_acc[41] == -1.0)
    z3solver.add(TTC[41] == 2.9600000000000066)
    z3solver.add(timestamps[42] == 420000)
    z3solver.add(ego_acc[42] == -1.0)
    z3solver.add(TTC[42] == 3.6000000000000285)
    z3solver.add(timestamps[43] == 430000)
    z3solver.add(ego_acc[43] == -1.0)
    z3solver.add(TTC[43] == 4.700000000000114)
    z3solver.add(timestamps[44] == 440000)
    z3solver.add(ego_acc[44] == -1.0)
    z3solver.add(TTC[44] == 6.950000000000361)
    z3solver.add(timestamps[45] == 450000)
    z3solver.add(ego_acc[45] == -1.0)
    z3solver.add(TTC[45] == 13.800000000002132)
    z3solver.add(timestamps[46] == 460000)
    z3solver.add(ego_acc[46] == -1.0)
    z3solver.add(TTC[46] == 1000000.0)
    z3solver.add(timestamps[47] == 470000)
    z3solver.add(ego_acc[47] == -1.0)
    z3solver.add(TTC[47] == 1000000.0)
    z3solver.add(timestamps[48] == 480000)
    z3solver.add(ego_acc[48] == -1.0)
    z3solver.add(TTC[48] == 1000000.0)
    z3solver.add(timestamps[49] == 490000)
    z3solver.add(ego_acc[49] == -1.0)
    z3solver.add(TTC[49] == 1000000.0)
    z3solver.add(timestamps[50] == 500000)
    z3solver.add(ego_acc[50] == -1.0)
    z3solver.add(TTC[50] == 1000000.0)
    z3solver.add(timestamps[51] == 510000)
    z3solver.add(ego_acc[51] == -1.0)
    z3solver.add(TTC[51] == 1000000.0)
    z3solver.add(timestamps[52] == 520000)
    z3solver.add(ego_acc[52] == -1.0)
    z3solver.add(TTC[52] == 1000000.0)
    z3solver.add(timestamps[53] == 530000)
    z3solver.add(ego_acc[53] == -1.0)
    z3solver.add(TTC[53] == 1000000.0)
    z3solver.add(timestamps[54] == 540000)
    z3solver.add(ego_acc[54] == -1.0)
    z3solver.add(TTC[54] == 1000000.0)
    z3solver.add(timestamps[55] == 550000)
    z3solver.add(ego_acc[55] == -1.0)
    z3solver.add(TTC[55] == 1000000.0)
    z3solver.add(timestamps[56] == 560000)
    z3solver.add(ego_acc[56] == -1.0)
    z3solver.add(TTC[56] == 1000000.0)
    z3solver.add(timestamps[57] == 570000)
    z3solver.add(ego_acc[57] == -0.5)
    z3solver.add(TTC[57] == 1000000.0)
    z3solver.add(timestamps[58] == 580000)
    z3solver.add(ego_acc[58] == -0.5)
    z3solver.add(TTC[58] == 1000000.0)
    z3solver.add(timestamps[59] == 590000)
    z3solver.add(ego_acc[59] == -0.5)
    z3solver.add(TTC[59] == 1000000.0)
    z3solver.add(timestamps[60] == 600000)
    z3solver.add(ego_acc[60] == -0.5)
    z3solver.add(TTC[60] == 1000000.0)
    z3solver.add(timestamps[61] == 610000)
    z3solver.add(ego_acc[61] == -0.5)
    z3solver.add(TTC[61] == 1000000.0)
    z3solver.add(timestamps[62] == 620000)
    z3solver.add(ego_acc[62] == -0.5)
    z3solver.add(TTC[62] == 1000000.0)
    z3solver.add(timestamps[63] == 630000)
    z3solver.add(ego_acc[63] == -0.5)
    z3solver.add(TTC[63] == 1000000.0)
    z3solver.add(timestamps[64] == 640000)
    z3solver.add(ego_acc[64] == -0.5)
    z3solver.add(TTC[64] == 1000000.0)
    z3solver.add(timestamps[65] == 650000)
    z3solver.add(ego_acc[65] == 0.0)
    z3solver.add(TTC[65] == 1000000.0)
    z3solver.add(timestamps[66] == 660000)
    z3solver.add(ego_acc[66] == 0.0)
    z3solver.add(TTC[66] == 1000000.0)
    z3solver.add(timestamps[67] == 670000)
    z3solver.add(ego_acc[67] == 0.0)
    z3solver.add(TTC[67] == 1000000.0)
    z3solver.add(timestamps[68] == 680000)
    z3solver.add(ego_acc[68] == 0.0)
    z3solver.add(TTC[68] == 1000000.0)
    z3solver.add(timestamps[69] == 690000)
    z3solver.add(ego_acc[69] == 0.0)
    z3solver.add(TTC[69] == 1000000.0)
    z3solver.add(timestamps[70] == 700000)
    z3solver.add(ego_acc[70] == 0.0)
    z3solver.add(TTC[70] == 1000000.0)
    z3solver.add(timestamps[71] == 710000)
    z3solver.add(ego_acc[71] == 0.0)
    z3solver.add(TTC[71] == 1000000.0)
    z3solver.add(timestamps[72] == 720000)
    z3solver.add(ego_acc[72] == 0.0)
    z3solver.add(TTC[72] == 1000000.0)
    z3solver.add(timestamps[73] == 730000)
    z3solver.add(ego_acc[73] == 0.0)
    z3solver.add(TTC[73] == 1000000.0)
    z3solver.add(timestamps[74] == 740000)
    z3solver.add(ego_acc[74] == 0.0)
    z3solver.add(TTC[74] == 1000000.0)
    z3solver.add(timestamps[75] == 750000)
    z3solver.add(ego_acc[75] == 0.0)
    z3solver.add(TTC[75] == 1000000.0)
    z3solver.add(timestamps[76] == 760000)
    z3solver.add(ego_acc[76] == 0.0)
    z3solver.add(TTC[76] == 1000000.0)
    z3solver.add(timestamps[77] == 770000)
    z3solver.add(ego_acc[77] == 0.0)
    z3solver.add(TTC[77] == 1000000.0)
    z3solver.add(timestamps[78] == 780000)
    z3solver.add(ego_acc[78] == 0.0)
    z3solver.add(TTC[78] == 1000000.0)
    z3solver.add(timestamps[79] == 790000)
    z3solver.add(ego_acc[79] == 0.0)
    z3solver.add(TTC[79] == 1000000.0)
    z3solver.add(timestamps[80] == 800000)
    z3solver.add(ego_acc[80] == 0.0)
    z3solver.add(TTC[80] == 1000000.0)
    z3solver.add(timestamps[81] == 810000)
    z3solver.add(ego_acc[81] == 0.0)
    z3solver.add(TTC[81] == 1000000.0)
    z3solver.add(timestamps[82] == 820000)
    z3solver.add(ego_acc[82] == 0.0)
    z3solver.add(TTC[82] == 1000000.0)
    z3solver.add(timestamps[83] == 830000)
    z3solver.add(ego_acc[83] == 0.0)
    z3solver.add(TTC[83] == 1000000.0)
    z3solver.add(timestamps[84] == 840000)
    z3solver.add(ego_acc[84] == 0.0)
    z3solver.add(TTC[84] == 1000000.0)
    z3solver.add(timestamps[85] == 850000)
    z3solver.add(ego_acc[85] == 0.0)
    z3solver.add(TTC[85] == 1000000.0)
    z3solver.add(timestamps[86] == 860000)
    z3solver.add(ego_acc[86] == 0.0)
    z3solver.add(TTC[86] == 1000000.0)
    z3solver.add(timestamps[87] == 870000)
    z3solver.add(ego_acc[87] == 0.0)
    z3solver.add(TTC[87] == 1000000.0)
    z3solver.add(timestamps[88] == 880000)
    z3solver.add(ego_acc[88] == 0.0)
    z3solver.add(TTC[88] == 1000000.0)
    z3solver.add(timestamps[89] == 890000)
    z3solver.add(ego_acc[89] == 0.0)
    z3solver.add(TTC[89] == 1000000.0)
    z3solver.add(timestamps[90] == 900000)
    z3solver.add(ego_acc[90] == 0.0)
    z3solver.add(TTC[90] == 1000000.0)
    z3solver.add(timestamps[91] == 910000)
    z3solver.add(ego_acc[91] == 0.0)
    z3solver.add(TTC[91] == 1000000.0)
    z3solver.add(timestamps[92] == 920000)
    z3solver.add(ego_acc[92] == 0.0)
    z3solver.add(TTC[92] == 1000000.0)
    z3solver.add(timestamps[93] == 930000)
    z3solver.add(ego_acc[93] == 0.0)
    z3solver.add(TTC[93] == 1000000.0)
    z3solver.add(timestamps[94] == 940000)
    z3solver.add(ego_acc[94] == 0.0)
    z3solver.add(TTC[94] == 1000000.0)
    z3solver.add(timestamps[95] == 950000)
    z3solver.add(ego_acc[95] == 0.0)
    z3solver.add(TTC[95] == 1000000.0)
    z3solver.add(timestamps[96] == 960000)
    z3solver.add(ego_acc[96] == 0.0)
    z3solver.add(TTC[96] == 1000000.0)
    z3solver.add(timestamps[97] == 970000)
    z3solver.add(ego_acc[97] == 0.0)
    z3solver.add(TTC[97] == 1000000.0)
    z3solver.add(timestamps[98] == 980000)
    z3solver.add(ego_acc[98] == 0.0)
    z3solver.add(TTC[98] == 1000000.0)
    z3solver.add(timestamps[99] == 990000)
    z3solver.add(ego_acc[99] == 0.0)
    z3solver.add(TTC[99] == 1000000.0)

    interval = And(t >= 0, t <= 90)
    cond = Implies(ego_acc[t] < -3.0, TTC[t] < 1.5)
    z3solver.add(Not(ForAll([t], Implies(And((Int('t') >= 0), (Int('t') <= 90)), Implies((ego_acc[t] < -5.266626856866962), (TTC[t] < 2.685442687545184))))))
    status = z3solver.check()
    print(status)
    print("--- %s seconds ---" % (time.time() - start_time))
    if status == sat:
        print("REQUIREMENT VIOLATED")
    elif status == unsat:
        print("REQUIREMENT SATISFIED")
    else:
        print("UNDECIDED")

if __name__ == '__main__':
    check_property()
